<style>
    :root {
        --primary-color: #63b3b0;
        --primary-dark: #4a8f8c;
        --primary-light: #e0f2f1;
    }

    body {
        background-color: #f8fafc;
        -webkit-tap-highlight-color: transparent;
        height: 100dvh;
        width: 100vw;
        overflow: hidden;
    }

    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    .expand-enter-active, .expand-leave-active { transition: all 0.3s ease-in-out; max-height: 800px; opacity: 1; }
    .expand-enter-from, .expand-leave-to { max-height: 0; opacity: 0; margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom: 0; }

    .slide-up-enter-active, .slide-up-leave-active { transition: all 0.3s ease-out; }
    .slide-up-enter-from, .slide-up-leave-to { transform: translateY(100%); opacity: 0; }
    
    .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }

    .custom-checkbox:checked + div { text-decoration: line-through; color: #94a3b8; }
    .safe-pb { padding-bottom: env(safe-area-inset-bottom); }
    #map-container { height: 100%; width: 100%; z-index: 1; }
    .leaflet-bottom { z-index: 400 !important; }

    /* Ticket Styles */
    .ticket-stub {
        background-image: radial-gradient(circle at 0 50%, transparent 10px, white 11px), radial-gradient(circle at 100% 50%, transparent 10px, white 11px);
        background-position: 0 0, 0 0;
        background-size: 100% 100%;
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
    }
    .ticket-divider {
        border-top: 2px dashed #e2e8f0;
        position: relative;
    }
    .ticket-divider::before, .ticket-divider::after {
        content: '';
        position: absolute;
        top: -10px;
        width: 20px;
        height: 20px;
        background-color: #1e293b;
        border-radius: 50%;
    }
    .ticket-divider::before { left: -30px; }
    .ticket-divider::after { right: -30px; }
    
    /* Rescue Button */
    #rescue-btn {
        display: none; /* Vue 載入成功後會維持隱藏 */
        position: fixed; top: 10px; left: 10px; z-index: 99999; 
        background-color: #ef4444; color: white; padding: 8px 16px; 
        border-radius: 8px; font-weight: bold; font-size: 12px; 
        box-shadow: 0 4px 6px rgba(0,0,0,0.3); border: 2px solid white;
        cursor: pointer;
    }

    /* ------------------------------------------- */
    /* [最終修正] 票根文字混亂問題的強力覆蓋樣式 */
    /* ------------------------------------------- */
    .ticket-stub, .ticket-stub * {
        /* 清除所有轉換和定位，讓元素回到正常流 */
        transform: none !important;
        position: static !important;
        left: auto !important;
        top: auto !important;
        /* 清除可能導致錯位的 CSS 過渡 */
        transition: none !important;
        animation: none !important;
        /* 確保元素在自身範圍內正常顯示 */
        overflow: visible !important; 
    }
    
    /* 重新設定票根的圓角缺口定位基準 */
    .ticket-stub {
        position: relative !important;
    }

    /* 重新設定票根內少數需要絕對定位的元素 (如貼紙) */
    .ticket-stub .text-4xl {
        /* 讓貼紙可以自由定位 */
        position: absolute !important;
        top: 16px !important;
        right: 4px !important;
        /* 保持貼紙的旋轉效果 */
        transform: rotate(12deg) !important;
    }
</style>
